<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.springframework.org/schema/webflow"
	xsi:schemaLocation="http://www.springframework.org/schema/webflow
                          http://www.springframework.org/schema/webflow/spring-webflow.xsd">

	<on-start>
		<evaluate expression="initialFlowSetupAction"></evaluate>
	</on-start>

	<action-state id="ticketGrantingTicketCheck">
		<evaluate expression="ticketGrantingTicketCheckAction" />
		<transition on="notExists" to="serviceAuthorizationCheck"></transition>
	</action-state>

	<action-state id="serviceAuthorizationCheck">
		<evaluate expression="serviceAuthorizationCheck" />
		<transition to="viewLoginForm" />
	</action-state>

	<view-state id="viewLoginForm" view="casLoginView" model="credential">
		<binder>
			<binding property="username" required="true" />
			<binding property="password" required="true" />

			<!-- <binding property="rememberMe" /> -->
		</binder>
		<on-entry>
			<set name="viewScope.commandName" value="'credential'" />

			<!-- <evaluate expression="samlMetadataUIParserAction" /> -->
		</on-entry>
		<transition on="submit" bind="true" validate="true" to="realSubmit" />
	</view-state>

	<end-state id="notExists" view="notExists"></end-state>
</flow>